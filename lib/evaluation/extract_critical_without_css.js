module.exports=e=>{const t=!!e.removePseudoSelectors,r=e.keepSelectors||[],n=(e.renderTimeout,!!e.dropKeyframes),c=window.innerHeight,o=t?/([^\s,\:\(])\:\:?(?!not)[a-zA-Z\-]{1,}(?:\(.*?\))?/g:/(.*)/,l=[],u=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return NodeFilter.FILTER_ACCEPT}},!0);for(;u.nextNode();){const e=u.currentNode;if(r.find(t=>e.matches(t)))l.push(e);else{e.getBoundingClientRect().top<c&&l.push(e)}}const s=document.styleSheets,a=(e,t,r)=>e.filter((function(e){return e.matches(t.selectorText.replace(r,"$1"))})).length>0;return Array.prototype.map.call(s,(function(e){const t=e.rules||e.cssRules;return t?{sheet:e,rules:Array.prototype.map.call(t,(function(e){try{if(e instanceof CSSMediaRule){let t=e.rules||e.cssRules,r=Array.prototype.filter.call(t,(function(e){return a(l,e,o)})).map((function(e){return e.cssText})).reduce((function(e,t){return t+"\n"+e}),"");return r?"@media "+e.media.mediaText+" { "+r+"}":null}return e instanceof CSSStyleRule?(-1!==e.selectorText.indexOf(".c24-travel-main-cnt .c24-travel-extended-fieldset, .c24-travel-main-cnt .c24-travel-searchform-wrapper")&&console.log(e.cssText),a(l,e,o)?e.cssText:null):n&&(e instanceof CSSKeyframeRule||e instanceof CSSKeyframesRule)?"":e.cssText}catch(t){throw console.error("Bad CSS rule",e.selectorText),t}})).filter((function(e){return e}))}:null})).filter((function(e){return e&&e.rules.length>0})).map((function(e){return e.rules.join("")})).reduce((function(e,t){return t+e}),"").replace(/\n/g,"").replace(/content\: \"(.)\"/g,(function(e,t){return'content: "\\'+encodeURI(t).substr(2)+'"'}))};